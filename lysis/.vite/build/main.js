"use strict";const g=require("electron"),k=require("node:path"),R=require("path"),T=require("child_process"),z=require("tty"),G=require("util"),I=require("fs"),L=require("net");function J(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var E={exports:{}},b={exports:{}},q={exports:{}},C,A;function Z(){if(A)return C;A=1;var i=1e3,e=i*60,c=e*60,f=c*24,p=f*365.25;C=function(r,n){n=n||{};var o=typeof r;if(o==="string"&&r.length>0)return v(r);if(o==="number"&&isNaN(r)===!1)return n.long?m(r):h(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function v(r){if(r=String(r),!(r.length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(n){var o=parseFloat(n[1]),l=(n[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return o*p;case"days":case"day":case"d":return o*f;case"hours":case"hour":case"hrs":case"hr":case"h":return o*c;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function h(r){return r>=f?Math.round(r/f)+"d":r>=c?Math.round(r/c)+"h":r>=e?Math.round(r/e)+"m":r>=i?Math.round(r/i)+"s":r+"ms"}function m(r){return a(r,f,"day")||a(r,c,"hour")||a(r,e,"minute")||a(r,i,"second")||r+" ms"}function a(r,n,o){if(!(r<n))return r<n*1.5?Math.floor(r/n)+" "+o:Math.ceil(r/n)+" "+o+"s"}return C}var D;function M(){return D||(D=1,function(i,e){e=i.exports=p.debug=p.default=p,e.coerce=a,e.disable=h,e.enable=v,e.enabled=m,e.humanize=Z(),e.names=[],e.skips=[],e.formatters={};var c;function f(r){var n=0,o;for(o in r)n=(n<<5)-n+r.charCodeAt(o),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function p(r){function n(){if(n.enabled){var o=n,l=+new Date,s=l-(c||l);o.diff=s,o.prev=c,o.curr=l,c=l;for(var t=new Array(arguments.length),d=0;d<t.length;d++)t[d]=arguments[d];t[0]=e.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(y,N){if(y==="%%")return y;u++;var S=e.formatters[N];if(typeof S=="function"){var P=t[u];y=S.call(o,P),t.splice(u,1),u--}return y}),e.formatArgs.call(o,t);var w=n.log||e.log||console.log.bind(console);w.apply(o,t)}}return n.namespace=r,n.enabled=e.enabled(r),n.useColors=e.useColors(),n.color=f(r),typeof e.init=="function"&&e.init(n),n}function v(r){e.save(r),e.names=[],e.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),o=n.length,l=0;l<o;l++)n[l]&&(r=n[l].replace(/\*/g,".*?"),r[0]==="-"?e.skips.push(new RegExp("^"+r.substr(1)+"$")):e.names.push(new RegExp("^"+r+"$")))}function h(){e.enable("")}function m(r){var n,o;for(n=0,o=e.skips.length;n<o;n++)if(e.skips[n].test(r))return!1;for(n=0,o=e.names.length;n<o;n++)if(e.names[n].test(r))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}}(q,q.exports)),q.exports}var B;function H(){return B||(B=1,function(i,e){e=i.exports=M(),e.log=p,e.formatArgs=f,e.save=v,e.load=h,e.useColors=c,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:m(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function c(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(a){try{return JSON.stringify(a)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function f(a){var r=this.useColors;if(a[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+a[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!!r){var n="color: "+this.color;a.splice(1,0,n,"color: inherit");var o=0,l=0;a[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(o++,s==="%c"&&(l=o))}),a.splice(l,0,n)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function v(a){try{a==null?e.storage.removeItem("debug"):e.storage.debug=a}catch{}}function h(){var a;try{a=e.storage.debug}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}e.enable(h());function m(){try{return window.localStorage}catch{}}}(b,b.exports)),b.exports}var $={exports:{}},U;function Y(){return U||(U=1,function(i,e){var c=z,f=G;e=i.exports=M(),e.init=l,e.log=a,e.formatArgs=m,e.save=r,e.load=n,e.useColors=h,e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(s){return/^debug_/i.test(s)}).reduce(function(s,t){var d=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(w,y){return y.toUpperCase()}),u=process.env[t];return/^(yes|on|true|enabled)$/i.test(u)?u=!0:/^(no|off|false|disabled)$/i.test(u)?u=!1:u==="null"?u=null:u=Number(u),s[d]=u,s},{});var p=parseInt(process.env.DEBUG_FD,10)||2;p!==1&&p!==2&&f.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var v=p===1?process.stdout:p===2?process.stderr:o(p);function h(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:c.isatty(p)}e.formatters.o=function(s){return this.inspectOpts.colors=this.useColors,f.inspect(s,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(s){return this.inspectOpts.colors=this.useColors,f.inspect(s,this.inspectOpts)};function m(s){var t=this.namespace,d=this.useColors;if(d){var u=this.color,w="  \x1B[3"+u+";1m"+t+" \x1B[0m";s[0]=w+s[0].split(`
`).join(`
`+w),s.push("\x1B[3"+u+"m+"+e.humanize(this.diff)+"\x1B[0m")}else s[0]=new Date().toUTCString()+" "+t+" "+s[0]}function a(){return v.write(f.format.apply(f,arguments)+`
`)}function r(s){s==null?delete process.env.DEBUG:process.env.DEBUG=s}function n(){return process.env.DEBUG}function o(s){var t,d=process.binding("tty_wrap");switch(d.guessHandleType(s)){case"TTY":t=new c.WriteStream(s),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var u=I;t=new u.SyncWriteStream(s,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var w=L;t=new w.Socket({fd:s,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=s,t._isStdio=!0,t}function l(s){s.inspectOpts={};for(var t=Object.keys(e.inspectOpts),d=0;d<t.length;d++)s.inspectOpts[t[d]]=e.inspectOpts[t[d]]}e.enable(n())}($,$.exports)),$.exports}typeof process<"u"&&process.type==="renderer"?E.exports=H():E.exports=Y();var K=E.exports,O=R,Q=T.spawn,W=K("electron-squirrel-startup"),_=g.app,j=function(i,e){var c=O.resolve(O.dirname(process.execPath),"..","Update.exe");W("Spawning `%s` with args `%s`",c,i),Q(c,i,{detached:!0}).on("close",e)},V=function(){if(process.platform==="win32"){var i=process.argv[1];W("processing squirrel command `%s`",i);var e=O.basename(process.execPath);if(i==="--squirrel-install"||i==="--squirrel-updated")return j(["--createShortcut="+e],_.quit),!0;if(i==="--squirrel-uninstall")return j(["--removeShortcut="+e],_.quit),!0;if(i==="--squirrel-obsolete")return _.quit(),!0}return!1},X=V();const x=J(X);x&&g.app.quit();const F=()=>{const i=new g.BrowserWindow({width:800,height:600,webPreferences:{preload:k.join(__dirname,"preload.js")}});i.loadFile(k.join(__dirname,"../renderer/main_window/index.html")),i.webContents.openDevTools()};g.app.on("ready",F);g.app.on("window-all-closed",()=>{process.platform!=="darwin"&&g.app.quit()});g.app.on("activate",()=>{g.BrowserWindow.getAllWindows().length===0&&F()});
